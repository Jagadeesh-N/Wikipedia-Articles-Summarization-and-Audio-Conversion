# Storage Service

## Introduction
The Storage Service in the "Wikipedia Articles Summarization and Conversion to Audio" project manages the storage and retrieval of summarized articles and their corresponding audio files. This service leverages Google Cloud Storage to ensure that data generated by other services is securely stored and readily available.

## Setup Instructions

### Prerequisites
- Google Cloud Platform (GCP) account with billing enabled.
- Configured `kubectl` command-line tool with access to your Kubernetes cluster.
- Google Cloud SDK (`gcloud`) installed and configured on your machine.

### Configuration and Deployment
Please make the changes mentioned below as noted in the respective `.sh` file.

#### 1. Creating a Storage Bucket
Create a Google Cloud Storage bucket to store summarized articles and audio files.
*Note: Modify the bucket name and location as necessary.*

#### 2. Setting Bucket Permissions
Assign the necessary permissions to your service account to interact with the storage bucket.
*Note: Ensure the service account and bucket name match your configuration.*

#### 3. Creating a Kubernetes Secret for Service Account
Create a Kubernetes secret to securely store the service account key that will be used by your application running on Kubernetes.
*Note: Replace the path `/home/jana3207/Wikipedia-Summarizer/Storage/wikipedia-service-account-key.json` with the path to your service account key.*

#### 4. Deploying Storage Service to Kubernetes Cluster
Build and deploy the Storage Service using the provided Makefile and Kubernetes configuration files.
*Note: Adjust the paths in the commands according to the location of your files.*


## Modifications
- **Bucket and Project IDs**: Replace the bucket name and project ID in the `.sh` script with those applicable to your GCP environment.
- **File Paths**: Modify any file paths in the script to match the directory structure on your machine where the necessary files are located.

### Using the Script
To execute the setup for the Storage Service, navigate to the directory containing `Storage_service.sh` and run the script:
```bash
./Storage_service.sh
```
Ensure you have execution permissions set on the script:
```bash
chmod +x Storage_service.sh
```


### Testing the Service
To ensure that the Storage Service is functioning correctly, you can perform a simple test using port-forwarding and curl to interact with the service.

1. **Port-forwarding**:
   Use kubectl to forward a local port to the service:
   ```bash
   kubectl port-forward deployment/storage-handler-deployment 5000:5000
   ```

2. **Testing with curl**:
   Use curl to send a test request to the service's health endpoint:
   ```bash
   curl http://localhost:5000/health
   ```

This will return the health status of the Storage Service, indicating whether it is up and running.

## Conclusion
After completing the setup and testing steps, the Storage Service will be fully operational, capable of handling requests for storing and retrieving data securely and efficiently. This service is crucial for the overall functionality of the "Wikipedia Articles Summarization and Conversion to Audio" project, providing a robust backend for data management.
